<!-- This is the additional logic layer that wraps around the actual upload -->
<div class='error_messages'></div>
<% if user.resume.file.nil? %>
  <div class="upload">
    <span>Upload your resume below:</span>
    <%= render partial: 'raw_upload', locals: {user: user} %>
  </div>
<% else %>
  <% if !user.resume.file.exists? %>
    <div class="upload">
      <span>Upload your resume below:</span>
      <%= render partial: 'raw_upload', locals: {user: user} %>
    </div>
  <% else %>
    <p>Your resume:</p>
    <p><%= link_to 'Download resume', user.resume_url(:query => {"response-content-disposition" => "attachment"}) %></p>
    <p><%= link_to 'Remove resume', user_upload_resume_path(resume_action: 'remove' ), method: 'patch', class: 'remove_upload' %> </p>
  <% end %>
<% end %>
